// Generated by CoffeeScript 1.11.1
(function() {
  Polymer({
    is: 'zillow-main-view',
    properties: {
      address: String,
      cityState: String,
      zip: String,
      validSearchResults: {
        type: Array,
        value: function() {
          return [];
        },
        notify: true
      },
      validSearchSelected: {
        type: Number,
        notify: true
      },
      isInvalid: Boolean,
      invalidSearchResult: String,
      showClear: false
    },
    observers: ['hideClear(address, cityState, zip, validSearchResults, invalidSearchResult)'],
    hideClear: function(address, cityState, zip, validSearchResults, invalidSearchResult) {
      var addressNull, cityStateNull, invalidSearchResultNull, validSearchResultsNull, zipNull;
      addressNull = address === void 0 || (address != null ? address.length : void 0) === 0;
      cityStateNull = cityState === void 0 || (cityState != null ? cityState.length : void 0) === 0;
      zipNull = zip === void 0 || (zip != null ? zip.length : void 0) === 0;
      validSearchResultsNull = validSearchResults === void 0 || (validSearchResults != null ? validSearchResults.length : void 0) === 0;
      invalidSearchResultNull = invalidSearchResult === void 0 || (invalidSearchResult != null ? invalidSearchResult.length : void 0) === 0;
      this.set('showClear', !(addressNull && cityStateNull && zipNull && validSearchResultsNull && invalidSearchResultNull));
    },
    clearPage: function() {
      this.set('address', '');
      this.set('cityState', '');
      this.set('zip', '');
      this.set('validSearchResults', []);
      this.set('validSearchSelected', -1);
      this.set('isInvalid', false);
      this.set('invalidSearchResult', '');
      Polymer.dom.flush();
    },
    fireSearch: function() {
      var ajax, queryParam;
      this.clearPage();
      queryParam = {};
      queryParam["address"] = this.address;
      queryParam["citystatezip"] = this.cityState + " " + this.zip;
      ajax = this.$.ajax;
      ajax.params = queryParam;
      ajax.generateRequest();
    },
    handleResponse: function(event, detail) {
      var code, message, messageText, response;
      if (detail.response) {
        message = detail.response.message;
        if (message) {
          code = message.code;
          if (code !== "0") {
            messageText = message.text;
            this.set('invalidSearchResult', messageText);
            this.set('isInvalid', true);
          } else {
            response = detail.response.response;
            this.set('validSearchResults', response.results);
          }
        }
      }
    },
    handleError: function(event, detail) {
      this.fire('toast-error', detail.error);
    }
  });

}).call(this);

//# sourceMappingURL=zillow-main-view.js.map
